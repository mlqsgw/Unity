<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Camera's Depth Texture</title>
<meta name="description" content="The Unity Manual helps you learn and use the Unity engine. With the Unity engine you can create 2D and 3D games, apps and experiences.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2854981-1']);
  _gaq.push(['_setDomainName', 'unity3d.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1503962755"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1503962755"></script><script type="text/javascript" src="docdata/toc.js?ts=1503962755"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1503962755"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1503962755">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="http://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>5.4 beta</b> (<a href="http://docs.unity3d.com/530/Documentation/Manual">switch to 5.3</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/">English</a></li>
<li><a href="/ja/current/Manual/">日本語</a></li>
<li><a href="/es/current/Manual/">Español</a></li>
<li><a href="/kr/current/Manual/">한국어</a></li>
<li><a href="/ru/current/Manual/">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity Manual</a></li>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="GraphicsReference.html">Graphics Reference</a></li>
<li><a href="SL-Reference.html"> Shader Reference</a></li>
<li><a href="SL-AdvancedTopics.html">Advanced ShaderLab topics</a></li>
<li> Camera's Depth Texture</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-DepthTextures.html"></a></span><div class="tip"> Using Depth Textures</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-PlatformDifferences.html"></a></span><div class="tip">Platform specific rendering differences</div>
</div>
</div></div>
<h1>Camera’s Depth Texture</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>A <a href="class-Camera.html">Camera</a> can generate a depth or depth+normals texture. This is a minimalistic G-buffer texture that can be used for post-processing effects or to implement custom lighting models (e.g. light pre-pass). It is also possible to build similar textures yourself, using <a href="SL-ShaderReplacement.html">Shader Replacement</a> feature.</p>

<p>Camera’s depth texture can be turned on using <a href="../ScriptReference/Camera-depthTextureMode.html">Camera.depthTextureMode</a> variable from script.</p>

<p>There are two possible depth texture modes:</p>

<ul>
<li>
<strong>DepthTextureMode.Depth</strong>: a <a href="SL-DepthTextures.html">depth texture</a>.</li>
<li>
<strong>DepthTextureMode.DepthNormals</strong>: depth and view space normals packed into one texture.</li>
</ul>

<h2>DepthTextureMode.Depth texture</h2>

<p>This builds a screen-sized <a href="SL-DepthTextures.html">depth texture</a>.</p>

<p>Depth texture is rendered using the same shader passes as used for shadow caster rendering (<code>ShadowCaster</code> pass type). So by extension, if a shader does not support shadow casting (i.e. there’s no shadow caster pass in the shader or any of the fallbacks), then objects using that shader will not show up in the depth texture.</p>

<ul>
<li>Make your shader <a href="SL-Fallback.html">fallback</a> to some other shader that has a shadow casting pass, or</li>
<li>If you’re using <a href="SL-SurfaceShaders.html">surface shaders</a>, adding an <code>addshadow</code> directive will make them generate a shadow pass too.</li>
</ul>

<p>Note that only “opaque” objects (that which have their materials and shaders setup to use <a href="SL-SubShaderTags.html">render queue</a> &lt;= 2500) are rendered into the depth texture.</p>

<h2>DepthTextureMode.DepthNormals texture</h2>

<p>This builds a screen-sized 32 bit (8 bit/channel) texture, where view space normals are encoded into R&amp;G channels, and depth is encoded in B&amp;A channels. Normals are encoded using Stereographic projection, and depth is 16 bit value packed into two 8 bit channels.</p>

<p>
<a href="SL-BuiltinIncludes.html"><code>UnityCG.cginc</code> include file</a> has a helper function <code>DecodeDepthNormal</code> to decode depth and normal from the encoded pixel value. Returned depth is in 0..1 range.</p>

<p>For examples on how to use the depth and normals texture, please refer to the EdgeDetection image effect in the Shader Replacement example project or <a href="script-ScreenSpaceAmbientOcclusion.html">Screen Space Ambient Occlusion Image Effect</a>.</p>

<h2>Tips &amp; Tricks</h2>

<p>
<a href="class-Camera.html">Camera inspector</a> indicates when a camera is rendering a depth or a depth+normals texture.</p>

<p>The way that depth textures are requested from the camera (<a href="../ScriptReference/Camera-depthTextureMode.html">Camera.depthTextureMode</a>) might mean
that after you disable some effect that needed them, the camera might still continue rendering them. Particularly with multiple effects present on a camera, where each of them needs a depth texture, there’s no good way to automatically “disable” depth texture rendering if you disable the individual effects.</p>

<p>When implementing complex shaders or Image Effects, keep <a href="SL-PlatformDifferences.html">Rendering Differences Between Platforms</a> in mind. In particular, using depth texture in an Image Effect often needs special handling on Direct3D + Anti-Aliasing.</p>

<p>In some cases, the depth texture might come directly from the native Z buffer. If you see artifacts in your depth texture, make sure that the shaders that use it <strong>do not</strong> write into the Z buffer (use <a href="SL-CullAndDepth.html">ZWrite Off</a>).</p>

<h2>Shader Variables</h2>

<p>Depth textures are available for sampling in shaders as global shader properties. By declaring a sampler called <code>_CameraDepthTexture</code> you will be able to sample the main depth texture for the camera.</p>

<p>
<code>_CameraDepthTexture</code> always refers to the camera’s primary depth
texture. By contrast, you can use <code>_LastCameraDepthTexture</code> to refer to the last depth texture rendered by any camera. This could be useful for example if you render a half-resolution depth texture in script using a secondary camera and want to make it available to a post-process shader.</p>

<h2>Under the hood</h2>

<p>Depth textures can come directly from the actual depth buffer,
or be rendered in a separate pass, depending on the rendering
path used and the hardware. Typically when using Deferred
Shading or Legacy Deferred Lighting rendering paths, the depth textures come “for free” since they are a product of the
G-buffer rendering anyway.</p>

<p>When the DepthNormals texture is rendered in a separate pass, this is done through <a href="SL-ShaderReplacement.html">Shader Replacement</a>. Hence it is important to have correct “<strong>RenderType</strong>” tag in your shaders.</p>

<h2>See Also</h2>

<ul>
<li>
<a href="WritingImageEffects.html">Writing Image Effects</a>.</li>
<li>
<a href="SL-DepthTextures.html">Depth Textures</a>.</li>
<li>
<a href="SL-ShaderReplacement.html">Shader Replacement</a>.</li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-DepthTextures.html"></a></span><div class="tip"> Using Depth Textures</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-PlatformDifferences.html"></a></span><div class="tip">Platform specific rendering differences</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">
<known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="http://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues>Copyright © 2016 Unity Technologies. Publication 5.4b-R</div>
<div class="menu">
<a href="http://unity3d.com/learn">Tutorials</a><a href="http://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="http://forum.unity3d.com">Forums</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MC35ML');</script>
</body>
</html>
