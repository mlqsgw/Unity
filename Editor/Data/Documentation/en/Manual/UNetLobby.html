<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Multiplayer Lobby</title>
<meta name="description" content="The Unity Manual helps you learn and use the Unity engine. With the Unity engine you can create 2D and 3D games, apps and experiences.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2854981-1']);
  _gaq.push(['_setDomainName', 'unity3d.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1503962755"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1503962755"></script><script type="text/javascript" src="docdata/toc.js?ts=1503962755"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1503962755"></script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1503962755">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="http://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-number">Version: <b>5.4 beta</b> (<a href="http://docs.unity3d.com/530/Documentation/Manual">switch to 5.3</a>)</div>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/">English</a></li>
<li><a href="/ja/current/Manual/">日本語</a></li>
<li><a href="/es/current/Manual/">Español</a></li>
<li><a href="/kr/current/Manual/">한국어</a></li>
<li><a href="/ru/current/Manual/">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity Manual</a></li>
<li><a href="UNet.html">Multiplayer and Networking</a></li>
<li><a href="UNetOverview.html">Networking Overview</a></li>
<li><a href="UNetUsingHLAPI.html">The High Level API</a></li>
<li>Multiplayer Lobby</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UNetConverting.html"></a></span><div class="tip">Converting a Single Player Game to Multiplayer</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UNetClientServer.html"></a></span><div class="tip">Network Clients and Servers</div>
</div>
</div></div>
<h1>Multiplayer Lobby</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Many multiplayer games have a staging area for players to join before playing the actual game. In this area - often called the “lobby”, players may be able to pick options and be able to set themselves as ready for the game to start.</p>

<p>The NetworkLobbyManager is a specialized <a href="../ScriptReference/Networking.NetworkManager.html">NetworkManager</a> that provides a lobby for Unity Multiplayer games. It includes:</p>

<ul>
<li>Limit on number of players that can join</li>
<li>Support for multiple players per client with a limit on number of players per client</li>
<li>Prevent players from joining game in-progress</li>
<li>Per-player ready state, so that game starts when all players are ready</li>
<li>Per-player configuration data</li>
<li>Re-joining the lobby when the game is finished</li>
<li>Virtual functions that allow custom logic for lobby events</li>
<li>A simple user interface for interacting with the lobby</li>
</ul>

<p>Below are the NetworkLobbyManager virtual functions called on the server:</p>

<ul>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyStartHost.html">OnLobbyStartHost</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyStopHost.html">OnLobbyStopHost</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyStartServer.html">OnLobbyStartServer</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerConnect.html">OnLobbyServerConnect</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerDisconnect.html">OnLobbyServerDisconnect</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerSceneChanged.html">OnLobbyServerSceneChanged</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerCreateLobbyPlayer.html">OnLobbyServerCreateLobbyPlayer</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerCreateGamePlayer.html">OnLobbyServerCreateGamePlayer</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerPlayerRemoved.html">OnLobbyServerPlayerRemoved</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerSceneLoadedForPlayer.html">OnLobbyServerSceneLoadedForPlayer</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerPlayersReady.html">OnLobbyServerPlayersReady</a></li>
</ul>

<p>All of the above server functions have empty default implementations, except for OnLobbyServerPlayersReady, which calls ServerChangeScene with the PlayScene.</p>

<p>Below are the NetworkLobbyManager virtual functions called on the client:</p>

<ul>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyClientEnter.html">OnLobbyClientEnter</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyClientExit.html">OnLobbyClientExit</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyClientConnect.html">OnLobbyClientConnect</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyClientDisconnect.html">OnLobbyClientDisconnect</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyStartClient.html">OnLobbyStartClient</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyStopClient.html">OnLobbyStopClient</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyClientSceneChanged.html">OnLobbyClientSceneChanged</a></li>
<li><a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyClientAddPlayerFailed.html">OnLobbyClientAddPlayerFailed</a></li>
</ul>

<p>All of the above client functions have empty default implementations.</p>

<h2>Lobby Player Objects</h2>

<p>There are two kinds of player objects - each which has a prefab slot in the NetworkLobbyManager. The slots can be seen in this screenshot:</p>

<figure>
<img src="../uploads/Main/NetworkLobbyManager.png" alt="">
</figure>

<p>The LobbyPlayer is created from the LobbyPlayerPrefab when a player joins the lobby:</p>

<ul>
<li>One LobbyPlayer for each player</li>
<li>Created when client connects, or player is added</li>
<li>Exists until client disconnects</li>
<li>Holds the ready flag for this player for the lobby</li>
<li>Handles commands while in the lobby</li>
<li>Add user scripts to this prefab to hold game-specific player data</li>
<li>This prefab must have a <a href="../ScriptReference/Networking.NetworkLobbyPlayer.html">NetworkLobbyPlayer</a> component</li>
</ul>

<h3>Minimum Players</h3>

<p>The “Minimum Players” field represents the minimum number of “Ready” players in the Lobby to start the Match with. If the number of connected clients is more than the “Minimum Players” value, then waiting for all connected clients to become “Ready” will start the Match.</p>

<p>For example if “Minimum Players” is set to 2:</p>

<ul>
<li>Start one instance of the game and start Host. Then in game Lobby UI press “Start” for your player. You will still be in Lobby mode because minimum number of Ready players to start game is 2.</li>
<li>Start two more instances of the game and start Clients there. It doesn’t matter that “Minimum Players” set to 2. Wait for all - 3 in this case - connected players to become Ready.</li>
<li>Press “Start” in Lobby UI for one player. Two players are Ready, but still in Lobby mode. Press “Start” in the Lobby UI for the last player and now all players moved to Game mode.</li>
</ul>

<h3>GamePlayer</h3>

<p>The GamePlayer is created from the GamePlayerPrefab when the game starts:</p>

<ul>
<li>One GamePlayer for each player</li>
<li>Created when game scene is started</li>
<li>Destroyed when re-entering lobby</li>
<li>Handles commands while in the game</li>
<li>This prefab must have a <a href="../ScriptReference/Networking.NetworkIdentity.html">NetworkIdentity</a> component</li>
</ul>

<p>The <a href="../ScriptReference/Networking.NetworkLobbyPlayer.html">NetworkLobbyPlayer</a> component is used for LobbyPlayer objects. It supplies some virtual function callbacks that can be used for custom lobby behaviour</p>

<pre><code>    public virtual void OnClientEnterLobby();
    public virtual void OnClientExitLobby();
    public virtual void OnClientReady(bool readyState);
</code></pre>

<p>The function <a href="../ScriptReference/Networking.NetworkLobbyPlayer.OnClientEnterLobby.html">OnClientEnterLobby</a> is called on the client when the game enters the lobby. This happens when the lobby scene starts for the first time, and also when returning to the lobby from the game-play scene.</p>

<p>The function <a href="../ScriptReference/Networking.NetworkLobbyPlayer.OnClientExitLobby.html">OnClientExitLobby</a> is called on the client when the game exists the lobby. This happens when switching to the game-play scene.</p>

<p>The function <a href="../ScriptReference/Networking.NetworkLobbyPlayer.OnClientReady.html">OnClientReady</a> is called on the client when the ready state of that player changes.</p>

<h2>Adding the Lobby to a Game</h2>

<p>Process for adding a NetworkLobby to a multiplayer game (without using the multiplayer-lobby asset package):</p>

<ul>
<li>Create a new lobby scene</li>
<li>Add the scene to the build settings, as the first scene</li>
<li>Create a new game object in the new scene, rename it to LobbyManager</li>
<li>Add the NetworkLobbyManager component to the LobbyManager object</li>
<li>Add the NetworkManagerHUD component to the LobbyManager object</li>
<li>Open the inspector for the NetworkLobbyManager component</li>
<li>Set the LobbyScene slot of the NetworkLobbyManger to the scene that contains the LobbyManager object</li>
<li>Set the PlayScene slot of the NetworkLobbyManager to the main game-play scene for the game</li>
<li>Create a new gameObject and rename it to LobbyPlayer</li>
<li>Add the NetworkLobbyPlayer component to the LobbyPlayer</li>
<li>Create a prefab for the LobbyPlayer and delete the instance from the scene</li>
<li>Set the LobbyPlayerPrefab slot to the LobbyPlayer prefab</li>
<li>Set the GamePlayerPrefab slot to the prefab for the player in the main game</li>
<li>Save the scene.</li>
<li>Run the game</li>
</ul>

<p>This version of the NetworkLobbyManager uses the OnGUI user interface like the <a href="../ScriptReference/Networking.NetworkManagerHUD.html">NetworkManagerHUD</a>. For a better user interface use the multiplayer-lobby asset package.</p>

<p>The NetworkLobbyManager has many virtual function callbacks that can be used for custom lobby behaviour. Most important is <a href="../ScriptReference/Networking.NetworkLobbyManager.OnLobbyServerSceneLoadedForPlayer.html">OnLobbyServerSceneLoadedForPlayer</a> which is called on the server for each player as they transition from the lobby to the main game. This is the ideal place to apply settings from the lobby to the player’s game-play object.</p>

<pre><code>    // for users to apply settings from their lobby player object to their in-game player object
    public override bool OnLobbyServerSceneLoadedForPlayer(GameObject lobbyPlayer, GameObject gamePlayer)
    {
        var cc = lobbyPlayer.GetComponent&lt;ColorControl&gt;();
        var player = gamePlayer.GetComponent&lt;Player&gt;();
        player.myColor = cc.myColor;
        return true;
    }
</code></pre>

<h2>Sample Project</h2>

<p>There is a sample project on the Unity asset store that uses the NetworkLobbyManager and provides a GUI for the lobby. This can be used as a starting point for making a multiplayer game with a lobby.</p>

<p><a href="https://www.assetstore.unity3d.com/en/#!/content/41836">Lobby Sample Project</a></p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UNetConverting.html"></a></span><div class="tip">Converting a Single Player Game to Multiplayer</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UNetClientServer.html"></a></span><div class="tip">Network Clients and Servers</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">
<known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="http://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues>Copyright © 2016 Unity Technologies. Publication 5.4b-R</div>
<div class="menu">
<a href="http://unity3d.com/learn">Tutorials</a><a href="http://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="http://forum.unity3d.com">Forums</a><a href="http://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MC35ML');</script>
</body>
</html>
